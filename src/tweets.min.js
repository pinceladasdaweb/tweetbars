/*!
*
* Tweetbars 1.1.0
* Copyright 2014, Pedro Rogerio
* Licensed under the WTFPL licenses (http://www.wtfpl.net/).
*
*/
var Browser=function(){var a=navigator.userAgent;return{ie:a.match(/MSIE\s([^;]*)/)}}();Handlebars.registerHelper("tweet",function(){return new Handlebars.SafeString(Twitter.twitterLinks(this.tweet))}),Handlebars.registerHelper("created",function(){return new Handlebars.SafeString(Twitter.prettyDate(this.created))});var Twitter={init:function(a){this.url="./tweets.php?username="+a.username+"&count="+a.count,this.template=a.template,this.container=a.container,this.fetch()},attachTemplate:function(){var a=Handlebars.compile(this.template);this.container.empty().append(a(this.tweets))},fetch:function(){var a=this;$.getJSON(this.url,function(b){a.tweets=$.map(b,function(a){try{if(a.user.screen_name)return{author:a.user.screen_name,tweet:a.text,thumb:a.user.profile_image_url,created:a.created_at}}catch(b){}}),a.attachTemplate()})},prettyDate:function(a){var b=new Date,c=new Date(a);Browser.ie&&(c=Date.parse(a.replace(/( \+)/," UTC$1")));var d=b-c,e=1e3,f=60*e,g=60*f,h=24*g;return isNaN(d)||0>d?"":7*e>d?"just now":f>d?Math.floor(d/e)+" seconds ago":2*f>d?"1 minute ago":g>d?Math.floor(d/f)+" minutes ago":2*g>d?"1 hour ago":h>d?Math.floor(d/g)+" hours ago":d>h&&2*h>d?"yesterday":365*h>d?Math.floor(d/h)+" days ago":"over a year ago"},twitterLinks:function(a){return a=a.replace(/(https?:\/\/)([\w\-:;?&=+.%#\/]+)/gi,'<a href="$1$2">$2</a>').replace(/(^|\W)@(\w+)/g,'$1<a href="https://twitter.com/$2">@$2</a>').replace(/(^|\W)#(\w+)/g,'$1<a href="https://twitter.com/search?q=%23$2">#$2</a>')}};